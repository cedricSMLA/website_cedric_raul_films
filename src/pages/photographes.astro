---
import Base from '@/layouts/Base.astro';
import Section from '@/components/Section.astro';
import Button from '@/components/Button.astro';
import Card from '@/components/Card.astro';
import { getCollection } from 'astro:content';

const photographes = await getCollection('photographes');
const sortedPhotographes = photographes.sort((a, b) => {
  // Featured first, then alphabetical
  if (a.data.featured && !b.data.featured) return -1;
  if (!a.data.featured && b.data.featured) return 1;
  return a.data.name.localeCompare(b.data.name);
});

const contactEmail = import.meta.env.CONTACT_EMAIL || 'contact@cedricraulfilms.fr';
---

<Base 
  title="Photographes partenaires - Cédric Raúl Films"
  description="Découvrez nos photographes partenaires pour un duo vidéo/photo parfait lors de votre mariage sur la Côte d'Azur."
>
  <!-- Hero Section -->
  <Section background="dark" padding="xl">
    <div class="max-w-4xl mx-auto text-center">
      <h1 class="text-4xl md:text-6xl font-bold text-warm-ivory mb-6">
        Nos photographes
        <span class="text-transparent bg-clip-text bg-gradient-to-r from-accent-blue to-accent-purple">
          partenaires
        </span>
      </h1>
      
      <p class="text-xl text-warm-beige mb-8">
        Des collaborations artistiques pour immortaliser votre mariage sous tous les angles. 
        Vidéo et photo en parfaite harmonie.
      </p>
      
      <div class="grid md:grid-cols-3 gap-6 text-center">
        <div>
          <div class="w-12 h-12 bg-accent-blue rounded-full flex items-center justify-center mx-auto mb-3">
            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
              <path d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
            </svg>
          </div>
          <h3 class="font-semibold text-warm-ivory">Coordination parfaite</h3>
          <p class="text-warm-beige text-sm">Équipes synchronisées</p>
        </div>
        
        <div>
          <div class="w-12 h-12 bg-accent-purple rounded-full flex items-center justify-center mx-auto mb-3">
            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
              <path d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
            </svg>
          </div>
          <h3 class="font-semibold text-warm-ivory">Style complémentaire</h3>
          <p class="text-warm-beige text-sm">Univers artistique cohérent</p>
        </div>
        
        <div>
          <div class="w-12 h-12 bg-accent-blue rounded-full flex items-center justify-center mx-auto mb-3">
            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
              <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
          </div>
          <h3 class="font-semibold text-warm-ivory">Tarifs négociés</h3>
          <p class="text-warm-beige text-sm">Forfaits duo avantageux</p>
        </div>
      </div>
    </div>
  </Section>

  <!-- Photographes Grid -->
  <Section background="light" padding="xl">
    <div class="max-w-6xl mx-auto">
      <div class="grid lg:grid-cols-3 gap-8">
        {sortedPhotographes.map((photographe) => (
          <Card 
            class="bg-white border-gray-200 h-full flex flex-col" 
            hover={true}
            id={photographe.slug}
          >
            <!-- Image Gallery -->
            <div class="relative">
              <div class="image-carousel" data-photographe={photographe.slug}>
                {photographe.data.images.map((image, index) => (
                  <img 
                    src={image} 
                    alt={`${photographe.data.name} - Photo ${index + 1}`}
                    class={`w-full h-64 object-cover transition-opacity duration-500 ${index === 0 ? 'opacity-100' : 'opacity-0 absolute inset-0'}`}
                    loading="lazy"
                  />
                ))}
              </div>
              
              {photographe.data.images.length > 1 && (
                <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2">
                  {photographe.data.images.map((_, index) => (
                    <button 
                      class={`w-2 h-2 rounded-full transition-colors ${index === 0 ? 'bg-white' : 'bg-white/50'}`}
                      data-index={index}
                      data-photographe={photographe.slug}
                    />
                  ))}
                </div>
              )}
              
              {photographe.data.featured && (
                <div class="absolute top-4 right-4 bg-accent-blue text-white px-3 py-1 rounded-full text-sm font-medium">
                  Recommandé
                </div>
              )}
            </div>
            
            <!-- Content -->
            <div class="p-6 flex-grow flex flex-col">
              <h3 class="text-2xl font-bold text-deep-black mb-2">
                {photographe.data.name}
              </h3>
              
              <p class="text-accent-blue font-medium mb-4">
                {photographe.data.speciality}
              </p>
              
              <p class="text-gray-700 mb-6 flex-grow">
                {photographe.data.bio}
              </p>
              
              <!-- Links -->
              <div class="space-y-3">
                {photographe.data.website && (
                  <a 
                    href={photographe.data.website}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="flex items-center text-accent-blue hover:text-accent-purple transition-colors"
                  >
                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                    </svg>
                    Site web
                  </a>
                )}
                
                {photographe.data.instagram && (
                  <a 
                    href={photographe.data.instagram}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="flex items-center text-accent-blue hover:text-accent-purple transition-colors"
                  >
                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 6.621 5.367 11.988 11.988 11.988s11.987-5.367 11.987-11.988C24.004 5.367 18.637.001 12.017.001zM8.449 16.988c-1.297 0-2.448-.473-3.342-1.257-.133-.117-.274-.244-.408-.375-.474-.464-.804-1.041-.963-1.688-.045-.183-.067-.37-.067-.561 0-2.45 1.985-4.435 4.435-4.435s4.435 1.985 4.435 4.435c0 2.45-1.985 4.435-4.435 4.435h-.655zm7.424-.016c-.297 0-.592-.049-.876-.146a4.424 4.424 0 01-1.622-.877 4.424 4.424 0 01-1.205-1.622c-.097-.284-.146-.579-.146-.876 0-2.45 1.985-4.435 4.435-4.435s4.435 1.985 4.435 4.435c0 2.45-1.985 4.435-4.435 4.435h-.586z"/>
                    </svg>
                    Instagram
                  </a>
                )}
                
                <Button 
                  href={`/contact?utm_source=photographes&utm_medium=card&utm_campaign=partner&photographer=${photographe.slug}`}
                  variant="outline" 
                  class="w-full mt-4"
                >
                  Demander un duo
                </Button>
              </div>
            </div>
          </Card>
        ))}
      </div>
    </div>
  </Section>

  <!-- Advantages Section -->
  <Section background="dark" padding="xl">
    <div class="max-w-4xl mx-auto">
      <div class="text-center mb-16">
        <h2 class="text-4xl md:text-5xl font-bold text-warm-ivory mb-6">
          Pourquoi choisir un duo ?
        </h2>
        <p class="text-xl text-warm-beige">
          L'alliance parfaite entre vidéo et photographie pour des souvenirs complets
        </p>
      </div>
      
      <div class="grid md:grid-cols-2 gap-8">
        <div class="bg-gray-900/50 rounded-lg p-8 border border-warm-beige/10">
          <div class="w-12 h-12 bg-accent-blue rounded-lg flex items-center justify-center mb-6">
            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
              <path d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
              <path d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
            </svg>
          </div>
          <h3 class="text-xl font-bold text-warm-ivory mb-4">Vision complémentaire</h3>
          <p class="text-warm-beige">
            Chaque professionnel capture des moments uniques. Ensemble, ils créent un récit 
            visuel complet de votre journée, sans rien manquer.
          </p>
        </div>
        
        <div class="bg-gray-900/50 rounded-lg p-8 border border-warm-beige/10">
          <div class="w-12 h-12 bg-accent-purple rounded-lg flex items-center justify-center mb-6">
            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
              <path d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
            </svg>
          </div>
          <h3 class="text-xl font-bold text-warm-ivory mb-4">Coordination parfaite</h3>
          <p class="text-warm-beige">
            Nos partenaires connaissent notre façon de travailler. Pas de gêne mutuelle, 
            une synchronisation naturelle pour votre plus grand confort.
          </p>
        </div>
        
        <div class="bg-gray-900/50 rounded-lg p-8 border border-warm-beige/10">
          <div class="w-12 h-12 bg-accent-blue rounded-lg flex items-center justify-center mb-6">
            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
          </div>
          <h3 class="text-xl font-bold text-warm-ivory mb-4">Qualité garantie</h3>
          <p class="text-warm-beige">
            Tous nos partenaires partagent notre exigence de qualité et notre approche 
            artistique. Un gage de cohérence et d'excellence.
          </p>
        </div>
        
        <div class="bg-gray-900/50 rounded-lg p-8 border border-warm-beige/10">
          <div class="w-12 h-12 bg-accent-purple rounded-lg flex items-center justify-center mb-6">
            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
          </div>
          <h3 class="text-xl font-bold text-warm-ivory mb-4">Tarifs préférentiels</h3>
          <p class="text-warm-beige">
            Bénéficiez de tarifs négociés pour les formules duo. Un investissement 
            intelligent pour des souvenirs deux fois plus riches.
          </p>
        </div>
      </div>
    </div>
  </Section>

  <!-- CTA Section -->
  <Section background="gradient" padding="xl">
    <div class="text-center max-w-3xl mx-auto">
      <h2 class="text-4xl md:text-5xl font-bold text-warm-ivory mb-6">
        Intéressé par un duo ?
      </h2>
      <p class="text-xl text-warm-beige mb-8">
        Contactez-nous pour discuter des possibilités de collaboration avec nos photographes partenaires
      </p>
      
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <Button 
          href={`/contact?utm_source=photographes&utm_medium=cta&utm_campaign=duo`}
          size="lg"
        >
          Demander un devis duo
        </Button>
        <Button href="/loren" variant="outline" size="lg">
          Voir notre forfait vidéo
        </Button>
      </div>
    </div>
  </Section>
</Base>

<script>
  // Image carousel for photographers
  document.querySelectorAll('[data-photographe]').forEach(carousel => {
    const photographeId = carousel.dataset.photographe;
    const images = carousel.querySelectorAll('img');
    const dots = document.querySelectorAll(`[data-photographe="${photographeId}"][data-index]`);
    
    if (images.length <= 1) return;
    
    let currentIndex = 0;
    
    // Auto-rotate images
    const rotateImages = () => {
      currentIndex = (currentIndex + 1) % images.length;
      updateCarousel();
    };
    
    const updateCarousel = () => {
      images.forEach((img, index) => {
        img.style.opacity = index === currentIndex ? '1' : '0';
      });
      
      dots.forEach((dot, index) => {
        if (index === currentIndex) {
          dot.classList.remove('bg-white/50');
          dot.classList.add('bg-white');
        } else {
          dot.classList.remove('bg-white');
          dot.classList.add('bg-white/50');
        }
      });
    };
    
    // Click handlers for dots
    dots.forEach((dot, index) => {
      dot.addEventListener('click', () => {
        currentIndex = index;
        updateCarousel();
      });
    });
    
    // Start auto-rotation
    setInterval(rotateImages, 4000);
  });
</script>